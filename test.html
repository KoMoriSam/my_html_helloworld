<html>

<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/3.4.0/remixicon.css" crossorigin="">
    <style>
        :root {
            --white-color: rgba(225, 225, 225, 0.8);
            --white-color-light: whitesmoke;
            --dark-color: rgba(17, 17, 17, 0.8);
            --dark-color-light: #1f1f1f;
            --active-color: #4CAF50;
            --text-color: var(--dark-color);
            --bg-color: var(--white-color-light);
            --bg-second-color: var(--white-color);
        }

        [data-theme="dark"] {
            --text-color: var(--white-color-light);
            --bg-color: var(--dark-color-light);
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
        }

        .active {
            background-color: #4CAF50;
        }

        h1 {
            text-align: center;
        }

        button {
            display: block;
            margin: 0 auto;
        }
    </style>
</head>

<body>
    <h1>亮暗模式切换示例</h1>
    <p>这是一个简单的网页，它可以根据系统亮暗模式自动切换网页亮暗模式，也可以让用户手动切换亮暗模式。</p>
    <i class="ri-moon-line" id="dark-toggle"></i>
    <i class="ri-sun-line" id="light-toggle"></i>
    <script>
        // 获取系统亮暗模式
        const systemTheme = window.matchMedia('(prefers-color-scheme: dark)');

        // 获取网页根元素
        const root = document.documentElement;

        // 获取切换按钮
        const darkToggle = document.getElementById('dark-toggle');
        const lightToggle = document.getElementById('light-toggle');

        // 定义一个函数，根据系统亮暗模式设置网页亮暗模式
        function setThemeBySystem() {
            if (systemTheme.matches) {
                // 如果系统是暗模式，设置网页为暗模式
                root.setAttribute('data-theme', 'dark');
                darkToggle.classList.toggle('active');
            } else {
                // 如果系统是亮模式，设置网页为亮模式
                root.removeAttribute('data-theme');
                lightToggle.classList.toggle('active');
            }
        }

        // 定义一个函数，根据用户点击切换网页亮暗模式
        function toggleThemeByUser() {            
            if (root.hasAttribute('data-theme')) {
                // 如果网页是暗模式，切换为亮模式
                root.removeAttribute('data-theme');
                darkToggle.classList.toggle('active');
                lightToggle.classList.toggle('active');
            } else {
                // 如果网页是亮模式，切换为暗模式
                root.setAttribute('data-theme', 'dark');                
                darkToggle.classList.toggle('active');
                lightToggle.classList.toggle('active');
            }
        }

        // 在网页加载时，根据系统亮暗模式设置网页亮暗模式
        window.addEventListener('load', setThemeBySystem);

        // 当系统亮暗模式改变时，根据系统亮暗模式设置网页亮暗模式
        systemTheme.addEventListener('change', setThemeBySystem);

        // 当用户点击切换按钮时，根据用户点击切换网页亮暗模式
        darkToggle.addEventListener('click', toggleThemeByUser);
        lightToggle.addEventListener('click', toggleThemeByUser);
    </script>
</body>

</html>